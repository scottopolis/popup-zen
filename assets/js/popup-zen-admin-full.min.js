!function(e,n,t,i){var o={};o.init=function(){t("#pzen_show_on_tags").suggest(e.ajaxurl+"?action=ajax-tag-search&tax=post_tag",{multiple:!0,multipleSep:","}),t("#pzen_show_on_cats").suggest(e.ajaxurl+"?action=ajax-tag-search&tax=category",{multiple:!0,multipleSep:","}),t("#pzen_show_on_types").suggest(e.ajaxurl+"?action=pzen_ajax_type_search",{multiple:!0,multipleSep:","}),t("#pzen_show_exclude_pages").suggest(e.ajaxurl+"?action=pzen_ajax_page_search",{multiple:!0,multipleSep:","}),t("body").on("change","select[name=mc_list_id]",o.resetGroups).on("change","select[name=mc_groups]",o.getMcInterests).on("change","input[name=display_when]",o.displayToggle),t("select[name=mc_list_id]").val()&&o.getMcGroups(!0),o.displayToggle()},o.resetGroups=function(){t("#mc_interest_checkboxes").html(""),t("#mailchimp-interests").hide(),t("select[name=mc_groups]").html("<option>None</option>").val("None"),t("#mailchimp-groups").hide(),o.getMcGroups()},o.getMcGroups=function(n){o.showSpinner();var i=t("#popupzen_meta_box_nonce").val(),a=t("select[name=mc_list_id]").val();a&&""!==a&&t.ajax({method:"GET",url:e.ajaxurl,data:{nonce:i,action:"pzen_get_mc_groups",list_id:a}}).done(function(e){o.populateGroups(e,n),o.hideSpinner()}).fail(function(e){console.log(e),o.hideSpinner()})},o.populateGroups=function(e,n){console.log(e);for(var i=(e=JSON.parse(e.data)).categories,a=t('select[name="mc_groups"]'),s="",p=0;p<i.length;p++)s+='<option value="'+i[p].id+'">'+i[p].title+"</option>";a.append(s),t("#mailchimp-groups").fadeIn(),n&&o.selectCurrentGroups(),o.getMcInterests(n)},o.getMcInterests=function(n){o.showSpinner();var i=t("#popupzen_meta_box_nonce").val(),a=t("select[name=mc_list_id]").val(),s=t("select[name=mc_groups]").val();s&&""!==s&&"None"!==s&&t.ajax({method:"GET",url:e.ajaxurl,data:{nonce:i,action:"pzen_get_mc_group_interests",list_id:a,group_id:s}}).done(function(e){o.populateInterests(e,n),o.hideSpinner()}).fail(function(e){console.log(e),o.hideSpinner()})},o.populateInterests=function(e,n){var i=(e=JSON.parse(e.data)).interests;e.interests&&t("#pzen-no-interests").hide();for(var a=t("#mc_interest_checkboxes"),s="",p=0;p<i.length;p++)s+='<p><input type="checkbox" name="mc_interests['+i[p].id+']" value="true">'+i[p].name+"</input></p>";a.append(s),t("#mailchimp-interests").fadeIn(),n&&o.selectCurrentInterests()},o.selectCurrentGroups=function(){var n=e.pzenAdmin.current_mc_group;n&&t('select[name="mc_groups"] option[value='+n+"]").prop("selected",!0)},o.selectCurrentInterests=function(){var n=e.pzenAdmin.current_mc_interests;for(var i in n)t('#mc_interest_checkboxes input[name="mc_interests['+i+']"]').prop("checked",!0)},o.displayToggle=function(){"link"===t("input[name=display_when]:checked").val()?t("#link-code").fadeIn().html('<p><small>Copy/paste this code into any post or page:</small></p><pre>[pzen-upgrade id="'+e.pzenAdmin.post_id+'" link="Click here."]Exclusive bonus! Download my free guide.[/pzen-upgrade]</pre>'):t("#link-code").hide()},o.showSpinner=function(){t("img.pzen-loading").show()},o.hideSpinner=function(){t("img.pzen-loading").hide()},o.init(),e.pzenFullAdmin=o}(window,document,jQuery);