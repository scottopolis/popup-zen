!function(e,n,i,t){var a={};a.init=function(){a.listeners(),a.toggleShowOn(),a.toggleTypes(),a.toggleDatepicker(),a.toggleEmailForm(),a.colors(),i(".pzen-datepicker").datepicker({dateFormat:"mm/dd/yy"}),i(".pzen-colors").wpColorPicker()},a.colors=function(){i(".pzen-accent-color").wpColorPicker({change:function(e,n){i("#pzen-customize-wrap .pzen-email-btn").css("background-color",e.target.value)}}),i(".pzen-bg-color").wpColorPicker({change:function(e,n){i("#pzen-customize-wrap .popup-zen-box").css("background-color",e.target.value)}}),i(".pzen-text-color").wpColorPicker({change:function(e,n){i(".pzen-content, .pzen-title, .pzen-content p").css("color",e.target.value)}})},a.listeners=function(){i(n).on("tinymce-editor-init",function(n,i){a.updatePreviewContent(),e.tinymce.activeEditor.on("keyup",function(e){a.updatePreviewContent()})}),i("#wp-content-wrap").hasClass("html-active")&&a.updatePreviewContent(),i("body").on("change",".pzen-switch input",a.toggleSwitch).on("change","input[name=expiration]",a.toggleDatepicker).on("change","input[name=show_on]",a.toggleShowOn).on("change","input[name=pzen_type]",a.toggleTypes).on("change","select[name=email_provider]",a.toggleEmailForm).on("keyup","#content",a.updatePreviewContent).on("focus","input#scroll_delay",function(){i("input[name=display_when][value=delay]").prop("checked","checked")}).on("click","#pzen-upload-btn",a.mediaUpload),i("#show_on_pages").suggest(e.ajaxurl+"?action=pzen_ajax_page_search",{multiple:!0,multipleSep:","})},a.toggleShowOn=function(){var e=i("input[name=show_on]:checked").val(),n=i("#show-certain-pages"),t=i("#pzen-cats"),a=i("#pzen-tags"),o=i("#pzen-types"),d=i("#pzen-exclude");switch(e){case"all":t.hide(),a.hide(),n.hide(),o.hide(),d.hide();break;case"limited":t.show(),a.show(),n.show(),o.show(),d.show();break;default:t.hide(),a.hide(),n.hide(),o.hide(),d.hide()}},a.toggleTypes=function(){var e=i("input[name=pzen_type]:checked").val(),n=i("#position-settings"),t=i("#hide_btn, label[for=hide_btn]"),a=i("#pzen-name-fields"),o=i("#permission-btns"),d=i("#popup-link-options");switch(e){case"pzen_header_bar":o.fadeIn(),d.hide(),t.hide(),n.hide(),a.hide();break;case"pzen_footer_bar":t.hide(),o.fadeIn(),d.hide(),n.hide(),a.hide();break;case"pzen_popup_link":a.fadeIn(),o.hide(),d.fadeIn(),t.hide(),n.hide();break;case"pzen_box":n.fadeIn(),o.hide(),d.hide(),a.show(),t.fadeIn();break;default:o.hide(),d.hide(),t.fadeIn(),n.fadeIn(),a.hide()}},a.toggleEmailForm=function(){var e=i("#none-selected"),n=i("#custom-email-options"),t=i("select[name=email_provider]").val(),a=i("input[name=item_type]:checked").val(),o=i("#mailchimp-fields"),d=i("#ac-fields"),c=i("#convertkit-fields"),l=i("#mailpoet-fields"),p=i("#drip-fields");"optin"===a&&i("#show-email-options").fadeIn(),"default"===t?(e.fadeIn(),n.hide(),c.hide(),o.hide(),l.hide(),d.hide(),p.hide()):"custom"===t?(n.fadeIn(),e.hide(),c.hide(),o.hide(),l.hide(),d.hide(),p.hide()):"mc"===t?(o.fadeIn(),c.hide(),n.hide(),e.hide(),l.hide(),d.hide(),p.hide()):"ck"===t?(c.fadeIn(),o.hide(),n.hide(),e.hide(),l.hide(),d.hide(),p.hide()):"mailpoet"===t?(l.fadeIn(),o.hide(),n.hide(),e.hide(),c.hide(),d.hide(),p.hide()):"ac"===t?(c.hide(),o.hide(),n.hide(),e.hide(),l.hide(),d.fadeIn(),p.hide()):"drip"===t&&(p.fadeIn(),c.hide(),o.hide(),n.hide(),e.hide(),l.hide(),d.hide())},a.toggleChat=function(){i("input[name=show_chat]").is(":checked")?i("#pzen-chat").removeClass("pzen-hide"):i("#pzen-chat").addClass("pzen-hide")},a.toggleSwitch=function(){a.toggleActiveAjax(i(this).data("id"))},a.toggleActiveAjax=function(n){var t={action:"pzen_toggle_active",id:n};i.ajax({method:"GET",url:e.ajaxurl,data:t}).done(function(e){}).fail(function(e){console.log(e)})},a.toggleDatepicker=function(){i("input[name=expiration]").is(":checked")?i("#pzen-until-datepicker").show():i("#pzen-until-datepicker").hide()},a.updatePreviewContent=function(){var t;t=i("#wp-content-wrap").hasClass("tmce-active")?e.tinymce.get("content").getContent():i("#content").val();var a=n.getElementById("pzen-first-row");a&&(a.innerHTML=t)},a.mediaUpload=function(e){e.preventDefault();var n;n?n.open():((n=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();i("#pzen-image-url").val(e.url),i(".pzen-image").attr("src",e.url)}),n.open())},a.openTab=function(e,i){console.log("open tab "+i,e),e.preventDefault();var t,a,o;for(a=n.getElementsByClassName("pzen-tab-content"),t=0;t<a.length;t++)a[t].style.display="none";for(o=n.getElementsByClassName("pzen-tab-link"),t=0;t<o.length;t++)o[t].className=o[t].className.replace(" active","");n.getElementById(i).style.display="block",e.currentTarget.className+=" active"},a.init(),e.pzenAdmin=a}(window,document,jQuery);